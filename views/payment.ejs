<!-- Inside index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content=
        "This is a demo of Web integration 
        of Razorpay in NodeJS" 
        author="Mr. Twinkle Sharma" />
    <title>Razorpay Web-Integration</title>
</head>

<body>
    <hr/>
    <h2>Order  :  <%=  getPlan.name %></h2>
    <h3>Description : <%=  getPlan.description %></h3>

    <ul>
        <li>Best Course for SDE placements</li>
        <li>
            Available in 4 major Languages JAVA, 
            C/C++, Python, Javascript
        </li>
        <li>Lifetime Access</li>
    </ul>

    <span> Cost:- <%=  getPlan.price %> <%=  getPlan.currency %> 
        <button id="pay-button" >
            Pay Now & Get Access
        </button> 
    </span>
    <!-- <h1></h1> -->
    <hr/>

    <!-- Processing Payment Checkout -->
    <!-- We will write code for payment here, 
        Replace this comment with the code we 
        are explaining below in step 5 of the 
        article -->
</body>
<!--Inside index.html -->
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
   
    
   var options = {
       "key":`<%= KEY_ID %>`, 
       "amount":`<%=  getPlan.price * 100  %>`, 
       "currency":`<%= getPlan?.currency%>`,
       "name": `<%= getPlan?.name %>`,
       "description": `<%=  getPlan?.description %>`,
        // "image": "https://media.geeksforgeeks.org/wp-content/uploads/20210806114908/dummy-200x200.png",
       "order_id": `<%=  orderData?.order_id %>`,  
       "handler": function (response){
           console.log("=======================",response)
           alert("This step of Payment Succeeded");
       },
       "prefill": {
          //Here we are prefilling random contact
         "contact":`<%=  orderData?.mobile %>`, 
           //name and email id, so while checkout
         "name": `<%=  orderData?.name %>`,  
         "email": `<%=  orderData?.email %>`
       },
      "notes" : {
         "description":"Best Course for SDE placements",
         "language":"Available in 4 major Languages JAVA,C/C++, Python, Javascript",
         "access":"This course have Lifetime Access"
       }, 
       "theme": {
           "color": "#2300a3"
       }
   };
   var razorpayObject = new Razorpay(options);
   console.log(razorpayObject);
   razorpayObject.on('payment.failed', function (response){
         console.log("===========",response?.razorpay_signature);
         alert("This step of Payment Failed");
   });

//    razorpayObject.on('payment.s', function (response){
//          console.log("===========",response);
//          alert("This step of Payment Failed");
//    });

   
   document.getElementById('pay-button').onclick = function(e){
       razorpayObject.open();
       e.preventDefault();
   }
</script>

</html>
